<ng-container *ngIf="bookPosition$ |async as bookPos ; else loading">
  <app-book-navigator [position]="bookPos"></app-book-navigator>
  <table>
    <tbody *ngIf="bookPos.book as book">
    <tr>
      <th>Couverture</th>
      <td>
        <img [src]="book.image">
      </td>
    </tr>
    <tr>
      <th>Titre</th>
      <td>{{book.title |uppercase}}</td>
    </tr>
    <tr>
      <th>Auteur</th>
      <td>{{book.author}}</td>
    </tr>
    <tr>
      <th>Prix</th>
      <td>{{book.price |currency:'EUR'}}</td>
    </tr>
    <tr>
      <th>Note</th>
      <td>{{book.rating |textRating}}</td>
    </tr>
    <tr>
      <th>Pages</th>
      <td>{{book.pages}}</td>
    </tr>
    <tr>
      <th>Description</th>
      <td [innerHTML]="book.description"></td>
    </tr>
    </tbody>
  </table>
  <p>
    <app-buy-button [book]="bookPos.book"></app-buy-button>
  </p>
  <app-book-navigator [position]="bookPos"></app-book-navigator>
</ng-container>

<ng-template #loading>
  <app-loading></app-loading>
</ng-template>
